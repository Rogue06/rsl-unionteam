<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNION TEAM - Dashboard Officiel</title>
    <style>
        :root {
            --bg-darker: #1e1f22; --bg-main: #2b2d31; --bg-preview: #313338;
            --text-white: #ffffff; --text-main: #dbdee1; --text-muted: #949ba4;
            --accent-discord: #5865f2; --success-green: #248046; --warning-orange: #f0b232;
        }

        body, html { margin: 0; padding: 0; height: 100%; font-family: "gg sans", sans-serif; background-color: var(--bg-main); color: var(--text-main); overflow: hidden; }
        header { background-color: var(--bg-darker); height: 70px; display: flex; align-items: center; justify-content: space-between; padding: 0 25px; border-bottom: 2px solid #1a1b1e; }
        
        .container { display: flex; height: calc(100% - 70px); }
        .editor-zone { flex: 1.1; background-color: var(--bg-darker); padding: 20px; overflow-y: auto; border-right: 1px solid #1a1b1e; }
        .preview-zone { flex: 0.9; background-color: var(--bg-preview); padding: 25px; overflow-y: auto; scroll-behavior: smooth; }

        .clan-card { background: #2b2d31; border-radius: 8px; padding: 18px; margin-bottom: 20px; border: 1px solid #3f4147; transition: 0.3s; }
        .clan-card h3 { margin: 0 0 15px 0; font-size: 13px; color: var(--warning-orange); text-transform: uppercase; }
        
        .grid-inputs { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; }
        .field { display: flex; flex-direction: column; gap: 5px; }
        label { font-size: 10px; font-weight: 800; color: var(--text-muted); text-transform: uppercase; }
        
        input { background: #1e1f22; border: 1px solid #1a1b1e; border-radius: 4px; padding: 8px; color: white; font-size: 13px; outline: none; }
        input:focus { border-color: var(--accent-discord); background: #232428; }

        .hl-active { background-color: rgba(240, 178, 50, 0.8) !important; color: black !important; font-weight: bold; border-radius: 3px; padding: 0 2px; }

        .btn-group { display: flex; gap: 8px; }
        button { padding: 8px 14px; border-radius: 4px; border: none; font-weight: 600; cursor: pointer; font-size: 12px; display: flex; align-items: center; gap: 6px; transition: 0.2s; }
        .btn-blue { background-color: var(--accent-discord); color: white; }
        .btn-green { background-color: var(--success-green); color: white; }
        .btn-gray { background: #4f545c; color: white; }
        .btn-outline { background: transparent; border: 1px solid var(--text-muted); color: var(--text-muted); }
        .btn-toggle { background: #4f545c; color: white; width: 100%; justify-content: center; margin-bottom: 20px; border: 1px dashed #949ba4; }

        .discord-mockup { font-size: 15px; line-height: 1.5; white-space: pre-wrap; color: #dbdee1; }
        .discord-mockup strong { color: #fff; }
        .discord-mockup hr { border: none; border-top: 1px solid #4e5058; margin: 25px 0; }

        #copy-toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--success-green); color: white; padding: 12px 25px; border-radius: 8px; opacity: 0; transition: 0.4s; font-weight: bold; z-index: 2000; pointer-events: none; }
        #expertMode { display: none; width: 100%; height: 85%; background: #232428; color: #dcddde; font-family: monospace; padding: 15px; border-radius: 8px; resize: none; border: 1px solid #1a1b1e; }

        #helpModal { position: fixed; inset: 0; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 3000; }
        .modal-content { background: var(--bg-main); padding: 30px; border-radius: 12px; max-width: 500px; color: var(--text-main); }
    </style>
</head>
<body>

<header>
    <div style="font-weight: 800; color: white;">üõ°Ô∏è UNION TEAM MANAGER</div>
    <div class="btn-group">
        <button class="btn-outline" onclick="toggleHelp()">‚ùì Aide</button>
        <button class="btn-gray" onclick="confirmReset()">üîÑ Reset</button>
        <div style="width: 2px; height: 30px; background: #4e5058; margin: 0 10px;"></div>
        <button class="btn-blue" onclick="copyAction('pure')">üöÄ Poster l'annonce</button>
        <button class="btn-green" onclick="copyAction('friend')">üë• Partager</button>
    </div>
</header>

<div class="container">
    <div class="editor-zone">
        <button id="toggleBtn" class="btn-toggle" onclick="toggleMode()">‚öôÔ∏è Passer en Mode Texte Libre (Expert)</button>
        
        <div id="formMode">
            <div class="clan-card" onfocusin="syncFocus('preview_gold')">
                <h3>üî• UNION TEAM GOLD</h3>
                <div class="grid-inputs">
                    <div class="field"><label>BDC</label><input type="text" id="g_bdc" data-base="UNM / NM / Brutal"></div>
                    <div class="field"><label>Hydre</label><input type="text" id="g_hy" data-base="Normal / Difficile / Brutal / Cauchemar"></div>
                    <div class="field"><label>Chim√®re</label><input type="text" id="g_ch" data-base="Difficile / Cauchemar / UNM"></div>
                    <div class="field"><label>CvC (RP/NRP)</label><input type="text" id="g_cvc" data-base="150k RP / 80k NRP"></div>
                    <div class="field"><label>Clash Hydre</label><input type="text" id="g_chy" data-base="650M"></div>
                    <div class="field"><label>Clash Chim√®re</label><input type="text" id="g_cch" data-base="500M"></div>
                    <div class="field"><label>Places</label><input type="text" id="g_pl" data-base="√† d√©terminer"></div>
                </div>
            </div>

            <div class="clan-card" onfocusin="syncFocus('preview_silver')">
                <h3>‚öîÔ∏è UNION TEAM SILVER</h3>
                <div class="grid-inputs">
                    <div class="field"><label>BDC</label><input type="text" id="s_bdc" data-base="UNM / NM"></div>
                    <div class="field"><label>Hydre</label><input type="text" id="s_hy" data-base="Normal / Difficile / Brutal"></div>
                    <div class="field"><label>Chim√®re</label><input type="text" id="s_ch" data-base="Facile / Difficile"></div>
                    <div class="field"><label>CvC (RP/NRP)</label><input type="text" id="s_cvc" data-base="100k RP / 50k NRP"></div>
                    <div class="field"><label>Clash Hydre</label><input type="text" id="s_chy" data-base="50M"></div>
                    <div class="field"><label>Clash Chim√®re</label><input type="text" id="s_cch" data-base=""></div>
                    <div class="field"><label>Places</label><input type="text" id="s_pl" data-base="√† d√©terminer"></div>
                </div>
            </div>

            <div class="clan-card" onfocusin="syncFocus('preview_savage')">
                <h3>üî• UNION TEAM SAVAGE</h3>
                <div class="grid-inputs">
                    <div class="field"><label>BDC</label><input type="text" id="sv_bdc" data-base="UNM / NM"></div>
                    <div class="field"><label>Hydre</label><input type="text" id="sv_hy" data-base="Normal / Difficile / Brutal / Cauchemar"></div>
                    <div class="field"><label>Chim√®re</label><input type="text" id="sv_ch" data-base="Difficile / Cauchemar"></div>
                    <div class="field"><label>CvC (RP/NRP)</label><input type="text" id="sv_cvc" data-base="80k RP / 50k NRP"></div>
                    <div class="field"><label>Clash Hydre</label><input type="text" id="sv_chy" data-base="80M"></div>
                    <div class="field"><label>Clash Chim√®re</label><input type="text" id="sv_cch" data-base="100M"></div>
                    <div class="field"><label>Places</label><input type="text" id="sv_pl" data-base="2 √† 3 places"></div>
                </div>
            </div>

            <div class="clan-card" onfocusin="syncFocus('preview_bronze')">
                <h3>ü•â UNION TEAM BRONZE</h3>
                <div class="grid-inputs">
                    <div class="field"><label>BDC</label><input type="text" id="b_bdc" data-base="UNM / NM / Brutal"></div>
                    <div class="field"><label>Hydre</label><input type="text" id="b_hy" data-base="Normal"></div>
                    <div class="field"><label>Chim√®re</label><input type="text" id="b_ch" data-base=""></div>
                    <div class="field"><label>CvC (RP/NRP)</label><input type="text" id="b_cvc" data-base="40k RP / 20k NRP"></div>
                    <div class="field"><label>Clash Hydre</label><input type="text" id="b_chy" data-base=""></div>
                    <div class="field"><label>Clash Chim√®re</label><input type="text" id="b_cch" data-base=""></div>
                    <div class="field"><label>Places</label><input type="text" id="b_pl" data-base="2 places dispo !"></div>
                </div>
            </div>
        </div>
        <textarea id="expertMode"></textarea>
    </div>

    <div class="preview-zone" id="previewArea">
        <div id="visualPreview" class="discord-mockup"></div>
    </div>
</div>

<div id="helpModal">
    <div class="modal-content">
        <h2>üìñ Guide Officier</h2>
        <p>‚Ä¢ <b>Champs Libres</b> : Modifiez les chiffres ou textes √† gauche.</p>
        <p>‚Ä¢ <b>Auto-suppression</b> : Si une case est vide, la ligne n'appara√Æt pas √† droite.</p>
        <p>‚Ä¢ <b>Reset</b> : Utilise les valeurs par d√©faut de l'Union Team.</p>
        <p>‚Ä¢ <b>Copier</b> : Cliquez sur Poster pour r√©cup√©rer l'annonce pr√™te pour Discord.</p>
        <button class="btn-blue" onclick="toggleHelp()" style="width:100%; justify-content:center">Fermer</button>
    </div>
</div>

<div id="copy-toast">Copi√© dans le presse-papier !</div>

<script>
let currentMode = "form";
let activeFieldId = null;

const clanData = [
    { id: 'g', name: 'GOLD', emoji: ':fire:' },
    { id: 's', name: 'SILVER', emoji: ':crossed_swords:' },
    { id: 'sv', name: 'SAVAGE', emoji: ':fire:' },
    { id: 'b', name: 'BRONZE', emoji: ':third_place:' }
];

function build() {
    if(currentMode !== "form") return;
    
    let fullText = `:dart: **[FR] L‚ÄôAlliance UNION TEAM Recrute !** :dart:\nTu veux un clan actif, organis√©, avec une vraie bonne ambiance, des strats solides et une progression garantie ?\nNotre Union poss√®de **3 clans : Bronze ‚Üí Silver ‚Üí Gold**, ce qui te permet d‚Äô√©voluer naturellement selon ton niveau et ton engagement.\n\n`;

    clanData.forEach(c => {
        const fields = {
            bdc: getVal(c.id+'_bdc'),
            hy: getVal(c.id+'_hy'),
            ch: getVal(c.id+'_ch'),
            cvc: getVal(c.id+'_cvc'),
            chy: getVal(c.id+'_chy'),
            cch: getVal(c.id+'_cch'),
            pl: getVal(c.id+'_pl')
        };

        fullText += `‚∏ª\n\n${c.emoji}** UNION TEAM ${c.name} **\n\n`;
        if(fields.bdc) fullText += `:boom: BDC : ${fields.bdc} ‚Üí tombent tous les jours\n`;
        if(fields.hy)  fullText += `:dragon: **Hydre** : ${fields.hy}\n`;
        if(fields.ch)  fullText += `:smiling_imp: **Chim√®re** : ${fields.ch} tombent\n`;
        
        fullText += `\n:heavy_check_mark: **Exigences :**\n`;
        if(c.name !== 'BRONZE') fullText += `‚Ä¢ Frapper **BDC UNM**\n`;
        if(fields.cvc) fullText += `‚Ä¢ **${fields.cvc}** en CvC\n`;
        if(fields.chy) fullText += `‚Ä¢ Quotas minimum Clash Hydre **${fields.chy}**\n`;
        if(fields.cch) fullText += `‚Ä¢ Quotas minimum Clash Chim√®re **${fields.cch}**\n`;
        
        fullText += c.name === 'BRONZE' ? `‚Ä¢ Motivation pour monter vers **Silver**, puis **Gold**\n` : `‚Ä¢ Activit√© Discord\n:dart:** Ambiance chill + performance + bienveillance**\n`;
        if(fields.pl)  fullText += `:pushpin: ** Place(s) disponible(s) **: ${fields.pl}\n\n`;
    });

    fullText += `‚∏ª\n\n:gift: **Pourquoi nous rejoindre ?**\n:heavy_check_mark: Une** communaut√© soud√©e**, mature et engag√©e\n:heavy_check_mark: Des **strats partag√©es** en permanence\n:heavy_check_mark: Un **Discord actif**\n:heavy_check_mark: Une vraie progression **de Bronze jusqu‚Äô√† Gold**\n\n‚∏ª\n\n:envelope_with_arrow:** Int√©ress√©(e) ?**\nMP direct pour candidater.\nOn a h√¢te de t‚Äôaccueillir dans l‚ÄôUnion Team :muscle:`;

    document.getElementById('expertMode').value = fullText;
    renderPreview();
}

function getVal(id) {
    const el = document.getElementById(id);
    if(!el) return null;
    const val = el.value.trim();
    if(!val) return null;
    return id === activeFieldId ? `<span class="hl-active">${val}</span>` : val;
}

function renderPreview() {
    let content = document.getElementById('expertMode').value;
    const emojiMap = { ":dart:":"üéØ", ":fire:":"üî•", ":boom:":"üí•", ":dragon:":"üêâ", ":smiling_imp:":"üòà", ":heavy_check_mark:":"‚úîÔ∏è", ":pushpin:":"üìå", ":crossed_swords:":"‚öîÔ∏è", ":third_place:":"ü•â", ":punch:":"üëä", ":gift:":"üéÅ", ":envelope_with_arrow:":"üì©", ":muscle:":"üí™" };
    
    let html = content.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/‚∏ª/g, '<hr>');
    html = html.replace("UNION TEAM GOLD", '<span id="preview_gold">UNION TEAM GOLD</span>');
    html = html.replace("UNION TEAM SILVER", '<span id="preview_silver">UNION TEAM SILVER</span>');
    html = html.replace("UNION TEAM SAVAGE", '<span id="preview_savage">UNION TEAM SAVAGE</span>');
    html = html.replace("UNION TEAM BRONZE", '<span id="preview_bronze">UNION TEAM BRONZE</span>');

    for (const [code, icon] of Object.entries(emojiMap)) { html = html.split(code).join(icon); }
    document.getElementById('visualPreview').innerHTML = html;
}

function syncFocus(id) { document.getElementById(id)?.scrollIntoView({ behavior: 'smooth', block: 'center' }); }

function confirmReset() {
    if(confirm("R√©initialiser tous les champs avec les valeurs par d√©faut ?")) {
        applyDefaults();
    }
}

function applyDefaults() {
    document.querySelectorAll('input').forEach(i => {
        i.value = i.getAttribute('data-base') || "";
    });
    build();
}

function toggleMode() {
    const f = document.getElementById('formMode'), e = document.getElementById('expertMode'), b = document.getElementById('toggleBtn');
    if(currentMode === "form") {
        f.style.display = "none"; e.style.display = "block";
        b.innerText = "üìù Revenir au Formulaire"; currentMode = "expert";
    } else {
        f.style.display = "block"; e.style.display = "none";
        b.innerText = "‚öôÔ∏è Mode Texte Libre"; currentMode = "form"; build();
    }
}

function copyAction(type) {
    let text = document.getElementById('expertMode').value.replace(/<span.*?>(.*?)<\/span>/g, "$1");
    if(type === 'friend') text = "```js\n" + text + "\n```";
    navigator.clipboard.writeText(text);
    const t = document.getElementById('copy-toast'); t.style.opacity = '1'; setTimeout(() => t.style.opacity = '0', 2000);
}

function toggleHelp() {
    const m = document.getElementById('helpModal'); m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
}

document.querySelectorAll('input').forEach(input => {
    input.addEventListener('input', (e) => { activeFieldId = e.target.id; build(); });
    input.addEventListener('focus', (e) => { activeFieldId = e.target.id; build(); });
    input.addEventListener('blur', () => { activeFieldId = null; build(); });
});

// INITIALISATION SANS ALERTE
window.onload = () => { applyDefaults(); };
</script>
</body>
</html>